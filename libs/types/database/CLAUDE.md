---
scope: libs/types/database/
updated: 2025-12-27
relates_to:
  - ../../CLAUDE.md
  - ../../../docs/EFFECT_PATTERNS.md
  - ../../provider/kysely/CLAUDE.md
---

# @samuelho-dev/types-database

Generated Kysely types from Prisma schema.

## AI Agent Reference

This is a **types library** containing database schema types generated by `prisma-effect-kysely`.

### CRITICAL: Generated Types

These types are AUTO-GENERATED. Do not manually edit:
- `src/lib/types.ts` - Table interfaces and DB type
- `src/lib/enums.ts` - PostgreSQL enum types

To regenerate after schema changes:
```bash
pnpm prisma generate
```

### Usage

```typescript
import type { DB } from "@samuelho-dev/types-database";
import { makeKyselyService } from "@samuelho-dev/provider-kysely"// Create Kysely service with type-safe DB
const kysely = yield* makeKyselyService<DB>({
  connectionString: process.env.DATABASE_URL
})

// All queries are now type-safe
const users = yield* kysely.query((db) =>
  db.selectFrom("user").selectAll().execute()
)
```

### Prisma Configuration

The generator is configured in `prisma/schema.prisma`:

```prisma
generator prisma_effect_kysely {
  provider     = "prisma-effect-kysely"
  output       = "../../libs/types/database/src/lib"
  enumFileName = "enums.ts"
  fileName     = "types.ts"
}
```

## For Future Claude Code Instances

- [ ] Types are AUTO-GENERATED - do not manually edit
- [ ] Run `pnpm prisma generate` after schema changes
- [ ] Import as `DB` type for Kysely generic parameter
- [ ] Consumed by provider-kysely and data-access libraries
- [ ] Source of truth is `prisma/schema.prisma`
