{
  "$schema": "http://json-schema.org/schema",
  "cli": "nx",
  "$id": "Feature",
  "title": "Create Feature Library",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "description": "Library name (e.g., 'auth', 'payment', 'search')",
      "$default": { "$source": "argv", "index": 0 },
      "x-prompt": "What name would you like to use for the feature library?",
      "pattern": "^[a-z][a-z0-9-]*$"
    },
    "directory": {
      "type": "string",
      "description": "Directory where the library is placed",
      "default": "libs/feature",
      "x-prompt": "Which directory should the library be created in?"
    },
    "description": {
      "type": "string",
      "description": "Human-readable feature description",
      "x-prompt": "Brief description of the feature (optional):"
    },
    "scope": {
      "type": "string",
      "description": "Domain scope (e.g., 'shared', 'payments', 'auth')",
      "x-prompt": "What is the domain scope?"
    },
    "platform": {
      "type": "string",
      "description": "Target platform (explicit, not derived)",
      "enum": ["node", "universal", "browser", "edge"],
      "default": "universal",
      "x-prompt": {
        "message": "What platform does this feature target?",
        "type": "list",
        "items": [
          {
            "value": "node",
            "label": "Node.js (server-side)"
          },
          {
            "value": "universal",
            "label": "Universal (both client and server)"
          },
          {
            "value": "browser",
            "label": "Browser (client-side only)"
          },
          {
            "value": "edge",
            "label": "Edge Runtime"
          }
        ]
      }
    },
    "includeClientServer": {
      "type": "boolean",
      "description": "Generate client.ts and server.ts with React hooks + Atom state",
      "default": false,
      "x-prompt": "Does this feature need React hooks or browser-specific code?"
    },
    "includeRPC": {
      "type": "boolean",
      "description": "Generate RPC router with handlers (@effect/rpc)",
      "default": false,
      "x-prompt": "Does this feature need RPC endpoints?"
    },
    "includeCQRS": {
      "type": "boolean",
      "description": "Generate CQRS structure (commands/queries/projections)",
      "default": false,
      "x-prompt": "Does this feature use CQRS patterns?"
    },
    "includeEdge": {
      "type": "boolean",
      "description": "Include edge runtime support (middleware, edge functions)",
      "default": false,
      "x-prompt": "Does this feature need edge runtime support?"
    },
    "testRunner": {
      "type": "string",
      "enum": ["vitest"],
      "default": "vitest",
      "description": "Test runner to use (vitest recommended for new projects)"
    },
    "tags": {
      "type": "string",
      "description": "Additional tags for module boundary rules (comma-separated)",
      "x-prompt": "Any additional tags? (comma-separated, optional)"
    }
  },
  "required": ["name"]
}
