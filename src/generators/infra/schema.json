{
  "$schema": "http://json-schema.org/schema",
  "cli": "nx",
  "$id": "Infra",
  "title": "Create Infrastructure Library",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "description": "Library name (e.g., 'cache', 'storage', 'webhooks')",
      "$default": { "$source": "argv", "index": 0 },
      "x-prompt": "What name would you like to use for the infrastructure library?",
      "pattern": "^[a-z][a-z0-9-]*$"
    },
    "directory": {
      "type": "string",
      "description": "A directory where the library is placed",
      "default": "libs/infra",
      "x-prompt": "Which directory should the library be created in?"
    },
    "description": {
      "type": "string",
      "description": "Human-readable service description",
      "x-prompt": "Brief description of the service (optional):"
    },
    "includeClientServer": {
      "type": "boolean",
      "description": "Generate client and server platform variants (creates both client.ts and server.ts with separate layers)",
      "default": false,
      "x-prompt": "Does this service need React hooks or browser-specific code?"
    },
    "includeEdge": {
      "type": "boolean",
      "description": "Include edge runtime support (middleware, edge functions)",
      "default": false,
      "x-prompt": "Does this service need edge runtime support?"
    },
    "skipTests": {
      "type": "boolean",
      "description": "Skip generating test files",
      "default": false
    },
    "consolidatesProviders": {
      "type": "boolean",
      "description": "Generate provider consolidation structure (aggregates multiple provider libraries)",
      "default": false,
      "x-prompt": "Does this infrastructure library consolidate multiple providers?"
    },
    "providers": {
      "type": "string",
      "description": "Comma-separated list of provider libraries to consolidate (e.g., 'kubectl,talos,terraform')",
      "x-prompt": "Which providers should be consolidated? (comma-separated, leave empty to skip)"
    }
  },
  "required": ["name"]
}
