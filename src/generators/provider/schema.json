{
  "$schema": "https://json-schema.org/schema",
  "$id": "Provider",
  "title": "Provider Library Generator",
  "type": "object",
  "cli": "nx",
  "description": "Generate an external service provider library with Effect-based architecture patterns",
  "properties": {
    "name": {
      "type": "string",
      "description": "Provider name (e.g., 'redis', 'stripe', 'postgres')",
      "pattern": "^[a-z][a-z0-9-]*[a-z0-9]$",
      "$default": {
        "$source": "argv",
        "index": 0
      },
      "x-prompt": "What is the provider name?"
    },
    "directory": {
      "type": "string",
      "description": "Directory where the provider library will be created",
      "default": "libs/provider",
      "x-prompt": "In which directory should the provider be created?"
    },
    "externalService": {
      "type": "string",
      "description": "External service this provider connects to (e.g., 'Stripe API', 'Redis')",
      "x-prompt": "What external service does this provider connect to?"
    },
    "description": {
      "type": "string",
      "description": "Human-readable description of the provider",
      "x-prompt": "Provide a brief description of this provider (optional)"
    },
    "platform": {
      "type": "string",
      "description": "Target platform for the provider",
      "enum": ["node", "browser", "universal", "edge"],
      "default": "node",
      "x-prompt": {
        "message": "What platform does this provider target?",
        "type": "list",
        "items": [
          {
            "value": "node",
            "label": "Node.js (server-side only)"
          },
          {
            "value": "browser",
            "label": "Browser (client-side only)"
          },
          {
            "value": "universal",
            "label": "Universal (both client and server)"
          },
          {
            "value": "edge",
            "label": "Edge Runtime (Vercel Edge, Cloudflare Workers)"
          }
        ]
      }
    },
    "includeClientServer": {
      "type": "boolean",
      "description": "Generate separate client.ts and server.ts exports (recommended for universal platform)",
      "default": false,
      "x-prompt": "Do you need separate client/server platform exports?"
    },
    "providerType": {
      "type": "string",
      "description": "Type of provider integration",
      "enum": ["sdk", "cli", "http", "graphql"],
      "default": "sdk",
      "x-prompt": {
        "message": "What type of provider integration is this?",
        "type": "list",
        "items": [
          {
            "value": "sdk",
            "label": "SDK/Library Wrapper (Stripe, AWS SDK, OpenAI, Supabase)"
          },
          {
            "value": "cli",
            "label": "CLI Tool Wrapper (ffmpeg, git, docker, imagemagick)"
          },
          {
            "value": "http",
            "label": "HTTP/REST API (custom REST endpoints, no official SDK)"
          },
          {
            "value": "graphql",
            "label": "GraphQL API (GraphQL endpoints, schema-based queries)"
          }
        ]
      }
    },
    "cliCommand": {
      "type": "string",
      "description": "CLI command name (required for CLI providers, e.g., 'ffmpeg', 'git')",
      "x-prompt": "What is the CLI command name?"
    },
    "baseUrl": {
      "type": "string",
      "description": "Base URL for HTTP/GraphQL providers (e.g., 'https://api.example.com')",
      "x-prompt": "What is the base URL for the API?"
    },
    "authType": {
      "type": "string",
      "description": "Authentication type for HTTP/GraphQL providers",
      "enum": ["bearer", "apikey", "oauth", "basic", "none"],
      "default": "bearer",
      "x-prompt": {
        "message": "What type of authentication does the API use?",
        "type": "list",
        "items": [
          {
            "value": "bearer",
            "label": "Bearer Token (Authorization: Bearer)"
          },
          {
            "value": "apikey",
            "label": "API Key (custom header)"
          },
          {
            "value": "oauth",
            "label": "OAuth 2.0"
          },
          {
            "value": "basic",
            "label": "Basic Auth"
          },
          {
            "value": "none",
            "label": "No authentication"
          }
        ]
      }
    },
    "tags": {
      "type": "string",
      "description": "Additional tags for module boundary rules (comma-separated)",
      "x-prompt": "Any additional tags for this provider? (comma-separated, optional)"
    }
  },
  "required": ["name", "externalService"],
  "additionalProperties": false
}
